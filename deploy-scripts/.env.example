# ============================================================================
# CLM Components Deployment Configuration
# ============================================================================
# This file contains environment variables used by deploy-clm.sh
# Copy this file to .env and modify values as needed for your environment:
#   cp .env.example .env

# Kubernetes Configuration
NAMESPACE=hyperfleet-e2e

# Release Configuration
RELEASE_PREFIX=hyperfleet

# Provider Configuration
GCP_PROJECT_ID=hcm-hyperfleet

# Image Registry Configuration
IMAGE_REGISTRY=registry.ci.openshift.org/ci

# API Component Configuration
API_IMAGE_REPO=hyperfleet-api
API_IMAGE_TAG=latest
API_SERVICE_TYPE=LoadBalancer

# API Adapter Configuration (comma-separated list)
# NOTE: Adapters are auto-discovered from testdata/adapter-configs/
# WARNING: Auto-discovery will OVERRIDE these environment variables if adapters are found
# These values are only used if no adapter configs exist in testdata/adapter-configs/
# Example: API_ADAPTERS_CLUSTER="example1-namespace,validation,dns"
# API_ADAPTERS_CLUSTER=""
# API_ADAPTERS_NODEPOOL=""

# Sentinel Component Configuration
SENTINEL_IMAGE_REPO=hyperfleet-sentinel
SENTINEL_IMAGE_TAG=latest
SENTINEL_BROKER_TYPE=googlepubsub
SENTINEL_GOOGLEPUBSUB_CREATE_TOPIC_IF_MISSING=true

# Adapter Component Configuration
ADAPTER_IMAGE_REPO=hyperfleet-adapter
ADAPTER_IMAGE_TAG=latest
ADAPTER_GOOGLEPUBSUB_CREATE_TOPIC_IF_MISSING=true
ADAPTER_GOOGLEPUBSUB_CREATE_SUBSCRIPTION_IF_MISSING=true

# Adapter Pub/Sub Configuration (Optional)
# If not set, these will be auto-generated based on namespace and resource type:
#   ADAPTER_SUBSCRIPTION_ID: ${NAMESPACE}-${resource_type}-${adapter_name}
#   ADAPTER_TOPIC: ${NAMESPACE}-${resource_type}
#   ADAPTER_DEAD_LETTER_TOPIC: ${NAMESPACE}-${resource_type}-dlq


# HyperFleet API Configuration
# Note: If namespace is different, use: http://hyperfleet-api.${NAMESPACE}.svc.cluster.local:8000
API_BASE_URL=http://hyperfleet-api:8000


# Helm Chart Sources
API_CHART_REPO=https://github.com/openshift-hyperfleet/hyperfleet-api.git
API_CHART_REF=main
API_CHART_PATH=charts

SENTINEL_CHART_REPO=https://github.com/openshift-hyperfleet/hyperfleet-sentinel.git
SENTINEL_CHART_REF=main
SENTINEL_CHART_PATH=deployments/helm/sentinel

ADAPTER_CHART_REPO=https://github.com/openshift-hyperfleet/hyperfleet-adapter.git
ADAPTER_CHART_REF=main
ADAPTER_CHART_PATH=charts

# Component Selection Flags (true/false)
INSTALL_API=true
INSTALL_SENTINEL=true
INSTALL_ADAPTER=true

# Uninstall Options (only used when --action uninstall)
# DELETE_K8S_RESOURCES: Delete Kubernetes resources (Helm releases + namespace)
DELETE_K8S_RESOURCES=false

# DELETE_CLOUD_RESOURCES: Delete GCP Pub/Sub topics and subscriptions
DELETE_CLOUD_RESOURCES=false

# DELETE_ALL: Delete everything (k8s + cloud resources) - overrides individual flags
DELETE_ALL=false

# Execution Options
DRY_RUN=false
VERBOSE=false
